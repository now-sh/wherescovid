<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <!-- Primary Meta Tags -->
  <title>COVID-19 Location Tracker - Find Cases Near You</title>
  <meta name="title" content="COVID-19 Location Tracker - Find Cases Near You">
  <meta name="description" content="Find COVID-19 cases near your location using geolocation. Track confirmed cases, deaths, and recoveries in your area with real-time data.">
  <meta name="keywords" content="COVID-19, location tracker, geolocation, coronavirus near me, cases tracker, COVID map">
  <meta name="author" content="Jason M. Hempstead (Casjay)">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://location.covid.casjay.coffee/">
  <meta property="og:title" content="COVID-19 Location Tracker - Find Cases Near You">
  <meta property="og:description" content="Find COVID-19 cases near your location using geolocation with real-time data.">
  <meta property="og:site_name" content="COVID-19 Location Tracker">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://location.covid.casjay.coffee/">
  <meta property="twitter:title" content="COVID-19 Location Tracker">
  <meta property="twitter:description" content="Find COVID-19 cases near your location using geolocation.">
  
  <!-- Theme Color (Dracula Purple) -->
  <meta name="theme-color" content="#bd93f9">
  <meta name="color-scheme" content="dark">
  
  <!-- Security Headers -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; img-src 'self' data: https:; connect-src 'self' https://services1.arcgis.com https://ipapi.co https://nominatim.openstreetmap.org; font-src 'self' data:;">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="X-Frame-Options" content="DENY">
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="alternate icon" href="/favicon.ico">
  
  <!-- Preconnect to External Services -->
  <link rel="dns-prefetch" href="//services1.arcgis.com">
  <link rel="dns-prefetch" href="//ipapi.co">
  <link rel="dns-prefetch" href="//nominatim.openstreetmap.org">
  
  <!-- Styles -->
  <link rel="stylesheet" href="styles/main.scss">
  
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-936146-4"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-936146-4');
  </script>
</head>
<body>
  <!-- Skip to Content Link -->
  <a href="#main-content" class="visually-hidden-focusable" style="position: absolute; top: -40px; left: 6px; background: var(--primary-color); color: var(--text-primary); padding: 8px; text-decoration: none; border-radius: 4px; z-index: 1000; font-weight: 600;">
    Skip to main content
  </a>

  <div class="container-fluid">
    <!-- Header -->
    <header role="banner" class="text-center">
      <h1 id="app-title">
        <span role="img" aria-label="Medical symbols">üò∑ üè• ü¶† üß´</span>
      </h1>
      <h2 id="app-subtitle">
        COVID-19 Location Tracker
      </h2>
      <p class="lead">Find COVID-19 cases near your location</p>
    </header>

    <!-- Main Content -->
    <main id="main-content" role="main" tabindex="-1">
      
      <!-- User Location Section -->
      <section class="location" role="region" aria-labelledby="location-heading">
        <h3 id="location-heading" class="visually-hidden">Your Location Information</h3>
        
        <div class="info-item" role="group" aria-label="Your current location">
          <span class="label">Your Location:</span>
          <span class="value" id="your-location" aria-live="polite" aria-atomic="true">Loading...</span>
        </div>
        
        <div class="error" id="locationError" style="display:none" role="alert" aria-live="assertive">
          Unable to automatically determine your location. Click the button below to use precise location.
        </div>
        
        <div class="action-buttons">
          <button 
            type="button" 
            class="btn btn-success" 
            id="locationButton"
            aria-describedby="location-help"
          >
            <span role="img" aria-hidden="true">üìç</span> Use Precise Location
          </button>
          <p id="location-help" class="visually-hidden">
            This will request your precise GPS coordinates to find the closest COVID-19 data
          </p>
        </div>
      </section>

      <!-- COVID Data Section -->
      <section class="location" role="region" aria-labelledby="covid-data-heading">
        <h3 id="covid-data-heading" class="visually-hidden">Nearby COVID-19 Statistics</h3>
        
        <div class="covid-stats">
          <div class="info-item" role="group" aria-label="Closest location with COVID data">
            <span class="label">Closest Location:</span>
            <span class="value" id="closest-location" aria-live="polite">Loading...</span>
          </div>
          <div class="info-item" role="group" aria-label="Distance to closest location">
            <span class="label">Distance:</span>
            <span class="value" id="distance" aria-live="polite">Loading...</span>
          </div>
          <div class="info-item" role="group" aria-label="Total confirmed COVID cases">
            <span class="label">Confirmed Cases:</span>
            <span class="value" id="confirmed" aria-live="polite">Loading...</span>
          </div>
          <div class="info-item" role="group" aria-label="Currently active COVID cases">
            <span class="label">Active Cases:</span>
            <span class="value" id="active" aria-live="polite">Loading...</span>
          </div>
          <div class="info-item" role="group" aria-label="Total COVID deaths">
            <span class="label">Deaths:</span>
            <span class="value" id="deaths" aria-live="polite">Loading...</span>
          </div>
          <div class="info-item" role="group" aria-label="Total recovered cases">
            <span class="label">Recovered:</span>
            <span class="value" id="recovered" aria-live="polite">Loading...</span>
          </div>
          <div class="info-item" role="group" aria-label="When data was last updated">
            <span class="label">Last Case Update:</span>
            <span class="value" id="updated" aria-live="polite">Loading...</span>
          </div>
          <div class="info-item" role="group" aria-label="When we last fetched the data">
            <span class="label">Last Data Request:</span>
            <span class="value" id="lastDataRequest" aria-live="polite">Loading...</span>
          </div>
        </div>
        
        <div class="error" id="casesError" style="display:none" role="alert" aria-live="assertive">
          No cases found. Click the button below to refresh cases.
        </div>
        
        <div class="note" role="note" aria-label="Important information about data">
          <strong>Note:</strong> This shows historical COVID-19 data (last updated March 2023).
          Current reporting may be limited as many regions have reduced COVID-19 tracking.
        </div>
        
        <div class="action-buttons">
          <button 
            type="button" 
            class="btn btn-danger" 
            id="refreshButton"
            aria-describedby="refresh-help"
          >
            <span role="img" aria-hidden="true">üîÑ</span> Refresh Cases
          </button>
          <p id="refresh-help" class="visually-hidden">
            This will clear the cache and fetch fresh COVID-19 data
          </p>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer role="contentinfo">
      <!-- Developer Info -->
      <section class="purple-text text-center" aria-labelledby="dev-heading">
        <h2 id="dev-heading" class="visually-hidden">Developer Information</h2>
        <p>
          <span role="img" aria-label="Made with love">üíúüíúüíú</span>
          <br />
          <span>Developed by </span>
          <a 
            href="https://github.com/casjay" 
            target="_blank" 
            rel="noopener noreferrer"
            aria-label="Jason M. Hempstead GitHub profile (opens in new tab)"
          >
            Jason M. Hempstead (Casjay)
          </a>
        </p>
      </section>
      
      <!-- Open Source Info -->
      <section class="purple-gradient text-center" aria-labelledby="source-heading">
        <h2 id="source-heading" class="visually-hidden">Open Source Information</h2>
        <p>
          This project is open source.
          <br />
          <a 
            href="https://github.com/now-sh/wherescovid" 
            target="_blank" 
            rel="noopener noreferrer"
            aria-label="View source code on GitHub (opens in new tab)"
          >
            View the code on GitHub
            <span aria-hidden="true">‚Üó</span>
          </a>
        </p>
      </section>

      <!-- Data Sources -->
      <section aria-labelledby="data-sources-heading">
        <h2 id="data-sources-heading" class="visually-hidden">Data Sources</h2>
        
        <div class="border-danger">
          <strong>COVID-19 Data:</strong>
          <br />
          <a 
            href="https://gisanddata.maps.arcgis.com/apps/opsdashboard/index.html#/bda7594740fd40299423467b48e9ecf6" 
            target="_blank" 
            rel="noopener noreferrer"
            aria-label="Johns Hopkins CSSE dashboard (opens in new tab)"
          >
            Johns Hopkins CSSE
            <span aria-hidden="true">‚Üó</span>
          </a>
        </div>
        
        <div class="border-danger">
          <strong>Historical Reference:</strong>
          <br />
          <a 
            href="https://www.cdc.gov/flu/pandemic-resources/1918-commemoration/pandemic-timeline-1918.htm" 
            target="_blank" 
            rel="noopener noreferrer"
            aria-label="1918 Pandemic information (opens in new tab)"
          >
            1918 Pandemic Timeline
            <span aria-hidden="true">‚Üó</span>
          </a>
        </div>
        
        <div class="border-danger">
          <strong>Location Services:</strong>
          <br />
          <a 
            href="https://ipapi.co" 
            target="_blank" 
            rel="noopener noreferrer"
            aria-label="IP API service (opens in new tab)"
          >
            IP API
            <span aria-hidden="true">‚Üó</span>
          </a>
          and 
          <a 
            href="https://nominatim.openstreetmap.org/" 
            target="_blank" 
            rel="noopener noreferrer"
            aria-label="OpenStreetMap Nominatim service (opens in new tab)"
          >
            Nominatim
            <span aria-hidden="true">‚Üó</span>
          </a>
        </div>
        
        <div class="more-info">
          <strong>Learn More:</strong>
          <br />
          <a 
            href="https://www.who.int/emergencies/diseases/novel-coronavirus-2019" 
            target="_blank" 
            rel="noopener noreferrer"
            aria-label="World Health Organization COVID-19 information (opens in new tab)"
          >
            World Health Organization
            <span aria-hidden="true">‚Üó</span>
          </a>
        </div>
      </section>

      <!-- Privacy Notice -->
      <section class="max-width" role="note" aria-labelledby="privacy-heading">
        <h2 id="privacy-heading" class="visually-hidden">Privacy Information</h2>
        <p>
          <strong>Privacy:</strong> This website does not store any data about you. 
          All data is requested from external sources. View the respective privacy 
          policies at the sites linked above.
        </p>
      </section>
    </footer>
  </div>

  <!-- Scripts -->
  <script src="app.js"></script>

  <!-- Cookie Consent (EU GDPR) -->
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
  <script>
    window.addEventListener("load", function(){
      window.cookieconsent.initialise({
        "palette": {
          "popup": {
            "background": "#282a36",
            "text": "#f8f8f2"
          },
          "button": {
            "background": "#bd93f9",
            "text": "#282a36",
            "border": "#bd93f9"
          }
        },
        "content": {
          "message": "In accordance with the EU GDPR law, this message is being displayed. We use minimal analytics and no personal data storage. ",
          "dismiss": "I Understand",
          "link": "Privacy Policy",
          "href": "https://casjaysdev.pro/policy/"
        }
      })
    });
  </script>

  <!-- Google Analytics (Privacy-focused) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-936146-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-936146-1', {
      anonymize_ip: true,
      cookie_expires: 0
    });
  </script>

  <!-- No JS Fallback -->
  <noscript>
    <div style="text-align: center; padding: 2rem; background: #282a36; color: #f8f8f2; font-family: sans-serif;">
      <h1>JavaScript Required</h1>
      <p>This application requires JavaScript to determine your location and display COVID-19 statistics.</p>
      <p>Please enable JavaScript in your browser and refresh the page.</p>
    </div>
  </noscript>
</body>
</html>
